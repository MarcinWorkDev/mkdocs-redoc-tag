<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Redoc</title>
  <link rel="stylesheet" type="text/css" id="slate-css" media="none" href="{{ css_dir }}redark.css" />
  <script src="{{ js_dir }}redark.js" charset="UTF-8"> </script>
</head>

<body style="overscroll-behavior-x: auto; background: {{background}};">
  <div id="redoc-container" style="margin-top: 1.6rem; position: relative;"></div>
  <script src="{{ js_dir }}redoc.standalone.js" charset="UTF-8"> </script>
  <script>
    const openapi_spec_url = "{{openapi_spec_url}}";
    const redoc_custom_props = {{redoc_custom_props}};

    window.onload = function () {
      const parent_scheme = parent.scheme
      if (parent_scheme === "slate") {
        enable_dark_mode();
      } else {
        disable_dark_mode();
      }
    }

    enable_dark_mode = function(){
      document.getElementById("slate-css").media = ""
      Redoc.init(
        openapi_spec_url,
        { theme: redark, scrollYOffset: 200 },
        document.getElementById('redoc-container'),
      );
    }

    disable_dark_mode = function(){
      document.getElementById("slate-css").media = "none"
      Redoc.init(
        openapi_spec_url,
        { scrollYOffset: 200 },
        document.getElementById('redoc-container'),
      );
    }
  </script>
</body>

</html>
